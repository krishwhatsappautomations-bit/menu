<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Krish Fast Food - Order System</title>
  <style>
    /* Simple reset */
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;background:#f7f7f9;color:#111}
    header{background:linear-gradient(90deg,#ff7a18,#ffb199);padding:18px;color:#fff}
    .container{max-width:980px;margin:18px auto;padding:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .brand h1{font-size:20px}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:18px}

    /* Menu cards */
    .menu{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .card{background:#fff;border-radius:12px;box-shadow:0 6px 18px rgba(22,22,26,0.06);padding:12px;display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .card .title{font-weight:700}
    .card .meta{display:flex;justify-content:space-between;align-items:center}
    .card button{background:#ff7a18;border:none;color:#fff;padding:8px 10px;border-radius:8px;cursor:pointer}

    /* Cart */
    .cart{background:#fff;padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(22,22,26,0.06)}
    .cart h3{margin-bottom:8px}
    .line{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #eee}
    .cart .total{font-weight:800;padding-top:12px}
    .qty{display:flex;gap:6px;align-items:center}
    .qty button{padding:4px 8px;border-radius:6px;border:1px solid #ddd;background:#fafafa}

    /* Upload */
    .uploader{display:flex;gap:8px;align-items:center}
    .uploader input[type=file]{display:none}
    .uploader label{padding:8px 10px;border-radius:8px;background:#f1f1f3;border:1px dashed #ddd;cursor:pointer}
    .preview-img{max-width:80px;border-radius:8px}

    /* WhatsApp preview */
    .wa-preview{background:#fcf9ed;border-radius:8px;padding:10px;margin-top:10px}
    .btn-wa{display:inline-block;margin-top:8px;padding:10px 12px;border-radius:8px;background:#25d366;color:#fff;border:none;cursor:pointer}

    /* Responsive */
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <img src="https://i.ibb.co/7VQ9K0M/logo-placeholder.png" alt="Krish Fast Food" width="56" height="56" style="border-radius:8px;background:#fff;padding:6px;object-fit:cover">
        <div>
          <h1>Krish Fast Food</h1>
          <div style="opacity:.95;font-size:13px">Order online • Fast pickup • WhatsApp preview</div>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <h2>Menu</h2>
          <div style="font-size:13px;color:#666">Tap items to add to cart</div>
        </div>

        <div id="menu" class="menu" style="margin-top:12px">
          <!-- Menu items injected by JS -->
        </div>
      </section>

      <aside>
        <div class="cart">
          <h3>Your Order</h3>
          <div id="cart-list">
            <div style="color:#666;font-size:14px;padding:8px 0">Cart is empty</div>
          </div>

          <div class="total" id="cart-total">Total: ₹0</div>

          <hr style="margin:12px 0;border:none;border-top:1px dashed #eee">

          <div>
            <label style="font-size:13px;display:block;margin-bottom:6px">Name</label>
            <input id="cust-name" type="text" placeholder="Your name" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd">
          </div>

          <div style="margin-top:8px">
            <label style="font-size:13px;display:block;margin-bottom:6px">Address / Notes</label>
            <textarea id="cust-addr" rows="3" placeholder="House no, street, landmark" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd"></textarea>
          </div>

          <div style="margin-top:10px">
            <div style="font-size:13px;margin-bottom:6px">Upload image (optional)</div>
            <div class="uploader">
              <label for="image-file">Attach photo</label>
              <input id="image-file" type="file" accept="image/*">
              <img id="thumb" src="" class="preview-img" style="display:none">
            </div>
            <div id="upload-status" style="font-size:13px;margin-top:6px;color:#666"></div>
          </div>

          <div style="margin-top:12px">
            <div style="font-size:13px">WhatsApp Preview</div>
            <div class="wa-preview" id="wa-preview">No items yet</div>
            <button id="open-wa" class="btn-wa">Open WhatsApp</button>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <script>
    /***********************
      Configuration
    ***********************/
    const PHONE_NUMBER = '919373606511'; // WhatsApp phone in international format (no +, country code +91)
    const IMGBB_API_KEY = 'YOUR_IMGBB_API_KEY_HERE'; // <-- REPLACE with your ImgBB API key

    /***********************
      Sample Menu (Edit as needed)
    ***********************/
    const MENU = [
      { id: 'm1', name: 'Veg Cheese Burger', price: 99, desc: 'Soft bun, veg patty, cheese, sauces', img: 'https://i.ibb.co/4J0s5QH/burger.jpg' },
      { id: 'm2', name: 'Chicken Zinger', price: 149, desc: 'Crispy chicken fillet with lettuce', img: 'https://i.ibb.co/2kPjZ2B/zinger.jpg' },
      { id: 'm3', name: 'Fries (Large)', price: 79, desc: 'Crispy golden fries', img: 'https://i.ibb.co/4Z8k1m3/fries.jpg' },
      { id: 'm4', name: 'Cold Coffee', price: 119, desc: 'Iced coffee with whipped cream', img: 'https://i.ibb.co/7k9Yk3T/coffee.jpg' },
      { id: 'm5', name: 'Veg Wrap', price: 129, desc: 'Mixed veg wrap with sauces', img: 'https://i.ibb.co/6bqK2Xz/wrap.jpg' }
    ];

    /***********************
      App State
    ***********************/
    const state = { cart: {}, uploadedImageUrl: '' };

    /***********************
      Helpers
    ***********************/
    function formatINR(n){ return '₹' + Number(n).toLocaleString('en-IN'); }

    function renderMenu(){
      const container = document.getElementById('menu');
      container.innerHTML = '';
      MENU.forEach(item=>{
        const card = document.createElement('div'); card.className='card';
        card.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="title">${item.name}</div>
          <div style="font-size:13px;color:#666">${item.desc}</div>
          <div class="meta">
            <div style="font-weight:700">${formatINR(item.price)}</div>
            <button data-id="${item.id}">Add</button>
          </div>
        `;
        container.appendChild(card);
      });

      // attach listeners to add buttons
      container.querySelectorAll('button[data-id]').forEach(btn=>{
        btn.addEventListener('click',()=>{
          addToCart(btn.getAttribute('data-id'));
        })
      });
    }

    function addToCart(id){
      const item = MENU.find(m=>m.id===id);
      if(!item) return;
      if(!state.cart[id]) state.cart[id] = {...item, qty:0};
      state.cart[id].qty++;
      renderCart();
    }

    function removeFromCart(id){
      delete state.cart[id];
      renderCart();
    }

    function changeQty(id, delta){
      if(!state.cart[id]) return;
      state.cart[id].qty += delta;
      if(state.cart[id].qty <= 0) removeFromCart(id);
      renderCart();
    }

    function renderCart(){
      const list = document.getElementById('cart-list');
      list.innerHTML = '';
      const keys = Object.keys(state.cart);
      if(keys.length === 0){ list.innerHTML = '<div style="color:#666;font-size:14px;padding:8px 0">Cart is empty</div>'; document.getElementById('wa-preview').innerText='No items yet'; document.getElementById('cart-total').innerText='Total: ₹0'; return; }

      let total = 0;
      keys.forEach(k=>{
        const it = state.cart[k];
        const line = document.createElement('div'); line.className='line';
        const left = document.createElement('div');
        left.innerHTML = `<div style="font-weight:700">${it.name}</div><div style="font-size:13px;color:#666">${formatINR(it.price)} x ${it.qty}</div>`;
        const right = document.createElement('div');
        right.innerHTML = `
          <div class="qty">
            <button data-action="dec" data-id="${it.id}">-</button>
            <div style="min-width:26px;text-align:center">${it.qty}</div>
            <button data-action="inc" data-id="${it.id}">+</button>
          </div>
          <div style="font-weight:700;margin-top:6px">${formatINR(it.price * it.qty)}</div>
        `;
        line.appendChild(left); line.appendChild(right);
        list.appendChild(line);
        total += it.price * it.qty;
      });

      document.getElementById('cart-total').innerText = 'Total: ' + formatINR(total);

      // quantity buttons
      list.querySelectorAll('button[data-action]').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const id = btn.getAttribute('data-id');
          const action = btn.getAttribute('data-action');
          changeQty(id, action === 'inc' ? 1 : -1);
        })
      });

      // update WA preview
      updateWhatsAppPreview();
    }

    function updateWhatsAppPreview(){
      const preview = document.getElementById('wa-preview');
      const keys = Object.keys(state.cart);
      if(keys.length===0){ preview.innerText='No items yet'; return; }
      let lines = [];
      keys.forEach(k=>{
        const it = state.cart[k];
        lines.push(`${it.name} x ${it.qty} = ₹${it.price * it.qty}`);
      });
      const total = Object.values(state.cart).reduce((s,i)=>s + i.price * i.qty,0);
      const name = document.getElementById('cust-name').value || '---';
      const addr = document.getElementById('cust-addr').value || '---';
      let text = `Order for: ${name}\nItems:\n${lines.join('\n')}\nTotal: ₹${total}\nAddress/Notes: ${addr}`;
      if(state.uploadedImageUrl) text += `\nImage: ${state.uploadedImageUrl}`;
      preview.innerText = text;
    }

    // build WA link
    function buildWhatsAppLink(){
      const preview = document.getElementById('wa-preview').innerText;
      const encoded = encodeURIComponent(preview);
      return `https://wa.me/${PHONE_NUMBER}?text=${encoded}`;
    }

    // Image upload to ImgBB
    async function uploadImageToImgBB(file){
      if(!file) return null;
      document.getElementById('upload-status').innerText = 'Uploading image...';
      try{
        const form = new FormData();
        form.append('image', file);
        // ImgBB expects the API key in query param
        const resp = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, { method: 'POST', body: form });
        const j = await resp.json();
        if(j && j.success){
          const url = j.data.display_url;
          state.uploadedImageUrl = url;
          document.getElementById('thumb').src = url; document.getElementById('thumb').style.display='block';
          document.getElementById('upload-status').innerText = 'Image uploaded.';
          updateWhatsAppPreview();
          return url;
        } else {
          document.getElementById('upload-status').innerText = 'Upload failed.';
          console.error('ImgBB response',j);
          return null;
        }
      }catch(err){
        console.error(err); document.getElementById('upload-status').innerText = 'Upload error.'; return null;
      }
    }

    // DOM events
    document.addEventListener('DOMContentLoaded',()=>{
      renderMenu();
      renderCart();

      document.getElementById('image-file').addEventListener('change', async (e)=>{
        const f = e.target.files[0];
        if(!f) return;
        // show local preview while uploading
        const url = URL.createObjectURL(f);
        const thumb = document.getElementById('thumb'); thumb.src = url; thumb.style.display='block';
        // upload to ImgBB
        if(IMGBB_API_KEY && IMGBB_API_KEY !== 'YOUR_IMGBB_API_KEY_HERE'){
          await uploadImageToImgBB(f);
        } else {
          document.getElementById('upload-status').innerText = 'Set your ImgBB API key in the code to enable upload. Selected image shown locally only.';
          // keep local preview but won't be available as link
          state.uploadedImageUrl = '';
          updateWhatsAppPreview();
        }
      });

      // update preview when name/addr change
      document.getElementById('cust-name').addEventListener('input', updateWhatsAppPreview);
      document.getElementById('cust-addr').addEventListener('input', updateWhatsAppPreview);

      document.getElementById('open-wa').addEventListener('click',()=>{
        const wa = buildWhatsAppLink();
        // open in new tab
        window.open(wa, '_blank');
      });
    });

    // Make the layout mobile-friendly by detecting small screens
    (function makeMobileOptimisations(){
      // nothing complex here; CSS already handles most. Keep this for future touches.
    })();
  </script>

  <!--
    Instructions:
    1) Replace the IMGBB_API_KEY value in the JS with your actual ImgBB API key.
    2) This page is a single-file demo. You can host it as static HTML (GitHub Pages, Netlify, Vercel, etc.).
    3) The WhatsApp button uses the international phone number 919373606511 (Krish Fast Food). It opens a prefilled chat containing the order summary and image link (if uploaded).
  -->
</body>
</html>
